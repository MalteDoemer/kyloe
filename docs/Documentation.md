# Kyloe Documentation

This is the documentation for the kyloe core library.

The library consists these parts:
- [SyntaxAnalysis](#syntax-analysis)
- [SemanticAnalysis](#semantic-analysis)
- [Symbols](#symbols)
- [Lowering](#lowering)
- [Backend](#backend)
- [Diagnostics](#diagnostics)

As well as [utility types](#utility) and the main public interfaces [Compilation](../kyloe/src/Compilation.cs) and [SyntaxTree](../kyloe/src/SyntaxTree.cs).


## Syntax Analysis

The syntax analysis is done by the two main classes: [Lexer](../kyloe/src/SyntaxAnalysis/Generated/Lexer.cs) and [Parser](../kyloe/src/SyntaxAnalysis/Generated/Parser.cs).

Lexer and parser are automatically generated by a [grammar file](../kyloe/src/SyntaxAnalysis/grammar.def).

### Lexer
The job of the lexer is to transform the text into a stream of [SyntaxTerminals](../kyloe/src/SyntaxAnalysis/Generated/SyntaxTerminal.cs).

### Parser
The parser reads the terminals from the lexer and builds the parse tree, consisting of [SyntaxTerminals](../kyloe/src/SyntaxAnalysis/Generated/SyntaxTerminal.cs) and [SyntaxNodes](../kyloe/src/SyntaxAnalysis/Generated/SyntaxNode.cs). The parser is a recursive descent parser, with the additional ability to parse left recursive productions using while loops.

## Semantic Analysis
The semantic analysis is done by the [Binder](../kyloe/src/SemanticAnalysis/Binder.cs). The binder walks the syntax tree that was created by the parser and constructs the bound tree. Every [BoundNode](../kyloe/src/SemanticAnalysis/BoundTree/BoundNode.cs) of the bound tree has a corresponding [SyntaxToken](../kyloe/src/SyntaxAnalysis/Generated/SyntaxToken.cs). This makes the bound tree resemble the structure of the syntax tree.

Most of the bound nodes are either a [BoundStatement](../kyloe/src/SemanticAnalysis/BoundTree/BoundStatement.cs) or a [BoundExpression](../kyloe/src/SemanticAnalysis/BoundTree/BoundExpression.cs). They correspond to source level statements and expressions. For example `while true {}` is a statement, whereas `1 + 2 * 3` is an expression. Every expression has to have a return type and also information whether this expression produces a value and whether the result is writable or not. This is described by [ValueCategory](../kyloe/src/SemanticAnalysis/ValueCategory.cs). 

Expression | Result Type | Value Category
---|---|---
`1 + 2` | `i64` | `ReadableValue`
`var value = 5.5; value` | `double` | `ModifiableValue`
`i32` | `i32` | `TypeName`
`value = 7.7` | `void` |  `None`

## Symbols
TODO

## Lowering
TODO

## Backend
TODO

## Diagnostics
TODO

## Utility
TODO
